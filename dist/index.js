var d=function(n,s,i,f){var o=arguments.length,h=o<3?s:f===null?f=Object.getOwnPropertyDescriptor(s,i):f,E;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")h=Reflect.decorate(n,s,i,f);else for(var T=n.length-1;T>=0;T--)if(E=n[T])h=(o<3?E(h):o>3?E(s,i,h):E(s,i))||h;return o>3&&h&&Object.defineProperty(s,i,h),h};var c=(n,s)=>{if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(n,s)};function l(n){let s;return class extends n{constructor(...i){if(s)return s;super(...i);s=this}}}class F{_c=0;_id="";constructor(n){if(this._c=0,this._id=n??w(5),n?.includes("-")){let[s,i]=[n.split("-").slice(0,-1).join("-"),n.split("-").slice(-1)[0]];this._id=s,this._c=C(i)?parseInt(i):0}}get id(){return this._id+"-"+this._c}get mid(){return this._id+"-"+ ++this._c}}class $ extends Map{obj(n){n&&t(n).forEach(([s,i])=>this.set(s,i))}map(n){n.forEach((s,i)=>{if(J(s))this.ass(i,s);else this.set(i,s)})}ass(n,s){if(!this.has(n))this.set(n,{});Y(this.get(n),s)}}var a=(n,s)=>{if(!s.has(n))s.set(n,new $);return s.get(n)},e=(n,s)=>{if(!s.has(n))s.set(n,[]);return s.get(n)},tn=(n)=>Array.from({length:n},(s,i)=>i),An="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Fn="abcdefghijklmnopqrstuvwxyz",Xn=tn(10).join(""),xn=new RegExp(/(\d+)(\d*)/,"m"),G=(n)=>typeof n==="function";var C=(n)=>{return!isNaN(parseFloat(n))&&isFinite(n)},O=(n)=>{return typeof n==="object"&&n!==null&&!Array.isArray(n)};var nn=(n)=>typeof n==="boolean",D=(n)=>typeof n==="string",Z=(n)=>Array.isArray(n),J=(n)=>typeof n==="object",sn=(n)=>typeof n==="number",S=(n)=>typeof n===null,fn=(n)=>typeof n===void 0,on=()=>typeof window===void 0;var{values:hn,keys:z,entries:t,hasOwn:en}=Object;var Y=Object.assign,I=(n)=>{return Object.keys(n).length};var X=(n)=>JSON.stringify(n);var En=(n)=>{if(n.startsWith("webkit"))n="--"+n;return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};var w=(n)=>{let s=An+Fn;return Array.from({length:n},(i,f)=>s+(f?Xn:"")).reduce((i,f)=>{return i+=f.charAt(Math.floor(Math.random()*f.length))},"")};var Tn=(n,s)=>{let i={added:{},removed:{},modified:{}},f=z(n),o=z(s);for(let h of o){let E=n[h],T=s[h];if(!(h in n))i.added[h]=T;else if(Z(E)&&Z(T)){if(X(E)!==X(T))i.modified[h]={old:E,new:T}}else if(J(E)&&J(T)&&!S(E)&&!S(T)){let H=Tn(E,T);if(I(H.added)||I(H.removed)||I(H.modified))i.modified[h]={old:E,new:T}}else if(E!==T)i.modified[h]={old:E,new:T}}for(let h of f)if(!(h in s))i.removed[h]=n[h];return i},bn=(n)=>{return hn(n).some((s)=>{return I(s)})},Pn=(n)=>{return n&&n.isConnected},L=new $,V=(n)=>{if(!L.has(n)){let s=document.getElementById(n);if(s)return L.set(n,s),s}else{let s=L.get(n);if(s&&Pn(s))return s;L.delete(n)}return},yn=(n,s)=>{for(let[i,f]of n){let o=V(i);if(!o){n.delete(i);continue}f.forEach((h)=>{h.call(o,s)})}};class K extends EventTarget{options;states=new $;_value;listening=!1;isNotWindow=on();constructor(n,s){super();this.options=s;this._value=n}get value(){return this._value}set value(n){if(S(n)||fn(n))return;if(J(this._value)){let s=Tn(this._value,n);if(!bn(s))return}else if(this._value===n)return;this._value=n,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}))}get listen(){let n=()=>this.listen,s=(i)=>{if(yn(this.states,i.detail),!this.states.size)n()()};if(!this.listening)this.addEventListener("updated",s,this.options),this.listening=!0;return()=>{this.listening&&this.removeEventListener("updated",s,this.options),this.listening=!1}}call(n,s){return(i)=>{if(a(i,this.states).set(s,n),!this.isNotWindow&&!this.listening)this.listen;return()=>{if(this.states.has(i))this.states.get(i)?.delete(s)}}}}function b(n){return new K(n)}var u=(n)=>{if(Z(n))return n.join(" ");else if(J(n)){if(O(n))return X(n)}else if(G(n))return u(n());else if(n!==void 0&&n!==null)return nn(n)?n?"":"false":String(n);return""};class m{attr;constructor(n={}){this.attr=n}getCallback(n,s){switch(s??n){case"style":return function(i){this.style.setProperty(n,i)};default:return function(i){this.setAttribute(n,i)}}}get(n,s=this.attr,i){let f=(o,h)=>{if(Z(h))n.attr_push(o,u(h));else if(h instanceof K){let E=i?`${i}_${o}`:o;n.states.push(h.call(this.getCallback(o,i),E)),f(o,h.value)}else if(J(h)){if(O(h)&&!i)this.get(n,h,o)}else n.attr_push(o,u(h),i)};t(s).forEach(([o,h])=>{if(["on"].includes(o))J(s.on)&&n.events.obj(s.on);else f(o,h)})}}var Wn=(n,s,i)=>{return n.addEventListener(s,i),()=>{n.removeEventListener(s,i)}};class j{events=new $;states=new $;winStates=new $;resetST=new $;resetEV=new $;constructor(){}get keys(){return[...new Set([...this.states.keys(),...this.events.keys()])]}set(n){let{id:s,events:i,states:f}=n;if(s){if(i.size)this.events.set(s,i);if(f.length)this.states.set(s,f)}return this}push(n){return this.events.map(n.events),this.states.map(n.states),this}stage(){this.events.forEach((n,s)=>{let i=V(s);if(!i){this.events.delete(s);return}n.forEach((f,o)=>{switch(o){case"ready":f.apply(i);break;case"resize":case"unload":case"popstate":this.winStates.set(s,{[o]:f});break;case"watch":let[h,E]=f(),T=()=>E.map((g)=>g.value),H=()=>{h(...T())};E.forEach((g)=>{e(s,this.states).push(g.call(H,s+"_watch"))});break;default:this.resetEV.get(s)?.push(Wn(i,o,f))}})}),this.states.forEach((n,s)=>{n.forEach((i)=>{e(s,this.resetST).push(i(s))})}),this.events=new $,this.states=new $}window(){let n=window,s=(i,f)=>{this.winStates.forEach((o,h)=>{if(o[f]){let E=V(h);if(E)o[f].call(E,i.target);else this.winStates.delete(h)}})};n.addEventListener("resize",(i)=>s(i,"resize")),n.addEventListener("beforeunload",(i)=>s(i,"unload")),n.addEventListener("popstate",(i)=>s(i,"popstate"))}reset(n){return n.forEach((s)=>{this.winStates.delete(s),this.resetST.get(s)?.forEach((i)=>{i()}),this.resetEV.get(s)?.forEach((i)=>{i()})}),this}}class R{xid;IDM;map=new $;states=[];events=new $;OZ;constructor(n,s=new F,i){this.xid=n;this.IDM=s;this.OZ=i??new j}attr_push(n,s,i){let f=i??n;if(!this.map.has(f))this.map.set(f,[]);let o=i?`${En(n)}:${s};`:s;this.map.get(f).push(o)}get attr(){let n=[""];return this.map.forEach((s,i)=>{let f=s.join("");n.push(f?`${i}="${f}"`:i)}),n.join(" ")}set id(n){if(!this.map.has("id"))this.map.set("id",[n])}get id(){return this.map.get("id")?.join("")}}var zn=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],U=new j,x=(n,s)=>{if(Z(n))return n.map((i)=>x(i,s)).join("");else if(n instanceof P){let i=n.__(s.IDM),{ctx:f,oz:o}=i;return s.OZ.push(o),f}else if(J(n))return X(n);else if(G(n))return x(n(),s);else if(n!==void 0&&n!==null)return String(n);return""},gn=(n,s)=>{let i=new F(n),f=new R(i.mid,i);return{ctx:x(s,f),catt:f}};class Hn{tag;ctx;closing;constructor(n,s){this.tag=n;this.ctx=s;let i=this.hasTag(n);this.closing=i?"":`</${n}>`}hasTag=(n)=>zn.includes(n);getCallback(n){return function(s){let i=this.id;if(i){let{ctx:f,catt:o}=gn(i,s);if(this.innerHTML!==f){this.innerHTML=f;let h=o.OZ.keys;if(h.length)U.reset(h),U.push(o.OZ).stage()}}}}process(n,s=this.ctx,i=[]){let f=(o)=>{if(Z(o))this.process(n,o,i);else if(o instanceof K)if(s.length>1)f(A("div",{},o));else{let h=o.value instanceof P?"dom":"ctx",{ctx:E,catt:T}=gn(n.xid+"-0",o.value);n.xid=T.xid,n.OZ.push(T.OZ),i.push(E),n.states.push(o.call(this.getCallback(h),h))}else i.push(x(o,n))};return s.forEach(f),i.join("")}get(n){let s=this.process(n);if(n.events.size||n.states.length)n.id=n.xid;return`<${this.tag}${n.attr}>${s}${this.closing}`}}class P{tag;attr;ctx;constructor(n,s={},...i){this.tag=n;this.attr=new m(s),this.ctx=new Hn(n,i)}__(n=new F){let s=new R(n.mid,n);return this.attr.get(s),{ctx:this.ctx.get(s),oz:s.OZ.set(s)}}}function A(n,s={},...i){if(G(n))return n(s??{},...i);return new P(n,s??{},i)}var Kn=(n,...s)=>s;class $n{app;path="";constructor(n,s){this.app=n;this.path=s?s.replace(".tsx",".js"):""}async ctx(n={}){await this.dom(n,!0)}async dom(n={},s=!1){let i=document.body,f=A("div",{id:"root"},await this.app(n)),{ctx:o,oz:h}=f.__(new F(i.id));if(s)i.insertAdjacentHTML("afterbegin",o),U.push(h),requestAnimationFrame(()=>{U.stage()})}async ssr(n={}){let s=A("div",{id:"root"},await this.app(n)),i=w(5),{ctx:f}=s.__(new F(i+"-0"));return{script:`<script type="module">import x from "./${this.path}";x.dom(${X(n)});</script>`,body:`<body  id="${i}">${f}</body>`}}}var p=(n)=>{if(n instanceof P){let{ctx:s,oz:i}=n.__();return U.push(i).stage(),s}return n};class Mn{e;opt;constructor(n){this.e=n;this.opt={duration:500,easing:"ease-in-out",fill:"forwards"}}animate(n,s={}){return this.e.animate(n,s)}get slide(){let n=({x:s=0,y:i=0},f={})=>{Y(this.opt,f);let o=[[s,i],[0,0]].map(([h,E])=>({transform:`translateX(${h}rem) translateY(${E}rem)`}));return this.e.animate(o,this.opt),this};return{left:(s={})=>{return n({x:-2},s)},right:(s={})=>{return n({x:2},s)},up:(s={})=>{return n({y:2},s)},down:(s={})=>{return n({y:-2},s)}}}fade(n={}){Y(this.opt,n);let s=[0,1].map((i)=>({opacity:i}));return this.e.animate(s,this.opt),this}shake(n="Y",s={}){Y(this.opt,s);let i=[0,5,-5,5,0].map((f)=>({transform:`translate${n}(${f}px)`}));return this.e.animate(i,this.opt),this}color(n=[],s={}){Y(this.opt,s);let i=Array.isArray(n)?n.map((f)=>({color:f})):{color:n};return this.e.animate(i,this.opt),this}bg(n=[],s={}){Y(this.opt,s);let i=Array.isArray(n)?n.map((f)=>({backgroundColor:f})):{backgroundColor:n};return this.e.animate(i,this.opt),this}bounce(n=1,s={}){Y(this.opt,s);let i=[0.5,n,1].map((f)=>({transform:`scale(${f})`}));return this.e.animate(i),this}}class Qn{e;query;constructor(n,s){this.e=n;this.query=s}get a(){return new Mn(this)}get all(){if(this.query){let n=document.querySelectorAll(this.query);if(n.length)return Array.from(n).map((s)=>B(s))}return[]}get attr(){let n=this.e;return{has:(s)=>{return n.hasAttribute(s)},get:(s)=>{return n.getAttribute(s)},del:(s)=>{return n.removeAttribute(s),this},set:(s)=>{for(let i in s){let f=s[i];if(s[i]!==void 0)n.setAttribute(i,f?f:"")}return this}}}get children(){return Array.from(this.e.children).map((n)=>B(n))}get click(){return this.e.click(),this}get delete(){return this.e.remove(),this}get disabled(){return this.e.disabled??!1}get focus(){return this.e.focus(),this}get id(){return this.e.id}get inner(){return this.e.innerHTML}get offsetParent(){let n=this.e.offsetParent;if(n)return new N(n);return}get parent(){let n=this.e.parentElement;if(n)return new N(n);return}get rect(){return this.e.getBoundingClientRect()}get remove_element(){return this.e.remove(),this}get style(){let n=this.e.style,s=this;return{set:(i,f=0)=>{let o=n,h=()=>{t(i).forEach(([E,T])=>{if(E in o){if(o[E]!==T)o[E]=T}else if(T!==null)n.setProperty(E,String(T))})};if(G(f))s.on("transitionend",f);if(sn(f))setTimeout(h,f);else h();return s},get:(i)=>{return n.getPropertyValue(i.toString())},del:(...i)=>{i.forEach((f)=>{n.removeProperty(f.toString())})}}}get submit(){let n=this.e;if("submit"in n)return n.submit();return!1}get tag(){return this.e.tagName.toLowerCase()}get value(){return this.e.value??""}set append(n){this.e.insertAdjacentHTML("beforeend",p(n))}set appendfirst(n){this.e.insertAdjacentHTML("afterbegin",p(n))}set disabled(n){let s=this.e;if("disabled"in s)s.disabled=n}set inner(n){this.e.innerHTML=p(n)}set id(n){this.e.id=n}set value(n){let s=this.e;s.value=n}}class N extends Qn{constructor(n,s){super(n,s)}add(...n){return this.e.classList.add(...n.map((s)=>s.replace(/[^\w-]/,""))),this}remove(...n){return this.e.classList.remove(...n.map((s)=>s.replace(/[^\w-]/,""))),this}toggle(n,s){let i=typeof n!="string"?n.apply(this):n,f=this.e.classList;return i.split(" ").forEach((o)=>{f.toggle(o,s)}),this}has(n){return this.e.contains(n)}insert(n){return{HTML:(...s)=>{return s.forEach((i)=>{this.e.insertAdjacentHTML(n,i)}),this},element:(...s)=>{return s.forEach((i)=>{this.e.insertAdjacentElement(n,i)}),this},text:function(...s){return s.forEach((i)=>{this.e.insertAdjacentText(n,i)}),this}}}is(n){let s=this.e.classList.value.split(" "),i=this.e.tagName.toLocaleLowerCase(),f=!0,o=!0;if(n.dom)o=n.dom==i?!0:!1;if(n.class)if(Array.isArray(n.class))n.class.forEach((h)=>{f=f?s.includes(h):!1});else f=f?s.includes(n.class):!1;return f&&o}on(n,s,i=!1){let f=!1;if(n.indexOf("touch")>-1)f=!0;return this.e.addEventListener(n,s,{capture:i,passive:f}),this}remove_on(n,s,i=!1){return this.e.removeEventListener(n,s,i),this}timed(n,s=250){return setTimeout(()=>n(this),s),this}animate(n,s,i){let f={duration:300,easing:"ease",fill:"forwards"};if(G(s))i=s;else Y(f,s);let o=this.e.animate(n,f);if(i)o.finished.then(i);return this}}function B(n){if(D(n)){let s=document.querySelector(n);if(s)return new N(s,n);return}else return new N(n)}var Un=(n,s,i="url")=>{if(n.attr.get(i)==s)n.attr.set({slc:""});else n.attr.del("slc")};class y{static _parseURL(n){let s=[],i=[],f=n,o="",h=n.match(/(?<=\?)[^/].*=?(?=\/|$)/g);if(h?.[0])o=h?.[0],f=n.slice(0,n.indexOf(o)-1);let E=f.match(/(?<=\/)[^/].*?(?=\/|$)/g)??["/"],T={};if(E?.forEach((H)=>{if(H.indexOf("<")>=0){let g=H.match(/(?<=<)[^/].*?(?=>|$)/g);if(g?.length){let M=g[0];if(M.indexOf(":")>-1){let[Q,q]=M.split(":");s.push(Q),i.push(q)}else s.push(M)}}else s.push(H)}),n.slice(-1)=="/"&&n.length>1)s.push("/");if(o)decodeURIComponent(o).split("&").forEach((M)=>{let[Q,q]=M.split(/\=(.*)/,2);T[Q]=q});return{parsed:s,wcard:i,query:T}}static _type(n,s=!1){let i=[];if(C(n))i=[Number(n),"number"];else if(s&&n.indexOf(".")>=1)i=[n,"file"];else{let f="-";if(n.length==36){let o=n.match(/\-/g);if(o&&o.length==4)f="uuid";else f="string"}else if(n!="/")f="string";i=[n,f]}return i}}function In(n,s){let i=n[0],f=n.slice(1);switch(i){case"*":return s.includes(f);case"^":return s.startsWith(f);case"&":return s.endsWith(f);default:return!1}}class Zn{basePath;maps={};wild=[];pathname;constructor(n){this.basePath=n;this.pathname="pathname"in location?location?.pathname.slice(0,-1):""}push(n){let s=["string","number","uuid"],{parsed:i,wcard:f}=y._parseURL(n);if(f.length)this.wild.push(n);else for(let o=0;o<i.length;o++)if(s.includes(i[o])){this.wild.push(n);break}}match(n){let s=this.wild,{parsed:i}=y._parseURL(n),f="",o="",h=0,E=0;if(i.forEach((T,H)=>{for(let g=0;g<s.length;g++){let{parsed:M,wcard:Q}=y._parseURL(s[g]);if(M.length==i.length&&Q.length)if(T==M[H]){o=s[g],h++;break}else if(Q[E]){let q=Q[E];if(E++,In(q,T)){o=s[g],h++;break}}else{let q=y._type(T);if(M[H]==q[1]){o=s[g],h++;break}}}}),!o||h!=i.length)i.forEach((T,H)=>{for(let g=0;g<s.length;g++){let{parsed:M}=y._parseURL(s[g]);if(M.length==i.length)if(T==M[H]){f=s[g];break}else{let[Q,q]=y._type(T);if(M[H]==q){f=s[g];break}}}});return h==i.length?o:f}url(n){if(n in this.maps)return[n,!1];else{let s=this.match(n);if(s&&s in this.maps)return[s,!0]}return["",!1]}path(n,{file:s,title:i="",css:f=""}){let o=this.basePath;if(this.push(n),G(s))this.maps[n]={js:s,title:i,css:f};else{let h=this.pathname+(o?o+s:s);this.maps[n]={js:h.replaceAll("//","/"),title:i,css:f}}}}class Jn{map;pushState;url="";attr;isSheet;page;nav;title;e;constructor(n={}){this.page=b(A("div",{},"")),this.nav=b("/"),this.title=b(""),this.pushState=n.pushState??!0,this.isSheet=n.isSheet??!1,this.attr=n.isSheet?"surl":"url",this.map=new Zn(n.basePath)}init(n,...s){this.e=n;let i=this.nav,f=this.attr,o=(h,E)=>{if(h!==E)this.get(h,E),this.nav.value=h;s.forEach((T,H)=>{T(this.isSheet&&H==0?!0:!1)})};return B(`[${f}]`)?.all.forEach((h)=>{if(!h.attr.has("nav"))h.attr.set({nav:null}),h.on("click",function(T){T.preventDefault();let H=B(this),g=H.attr.get(f);if(g)o(g,i.value)})}),this}afterImp(n,s,i,f=!1){if(this.title.value=s,this.init(this.e),!this.isSheet){if(location.pathname!==i)this.pushState&&history.pushState({},s,i);!f&&this.e&&this.e.scrollTo({top:n.sT,behavior:"instant"})}}async import(n,s,i=!1){let f=async(o)=>{this.page.value=await o(),this.afterImp(n,document.title,s)};if(D(n.js)){let o=await import((location.pathname?"":".")+n.js);if("default"in o){this.page.value=await o.default({...i&&{url:s}});let h=n.title??document.title;!this.isSheet&&(document.title=h),this.afterImp(n,h,s)}else this.page.value=A("div",void 0,"error: js has no export defaults.")}else f(n.js)}sheet(n){let[s,i]=this.map.url(n);if(s)this.import(this.map.maps[s],n,i);return this}reset(){this.page.value=A("div",void 0,"")}async get(n,s){if(s){let[o,h]=this.map.url(s);if(o&&this.e)this.map.maps[o].sT=this.e.scrollTop??0}let[i,f]=this.map.url(n);if(i)this.url=n,this.nav.value=n,!this.isSheet&&B(`[${this.attr}]`)?.all.forEach((o)=>Un(o,n)),await this.import(this.map.maps[i],n,f);else this.page.value=A("div",void 0,`"${n}" - not found...`);return this}path(n,{file:s,title:i="",css:f=""}){return this.map.path(n,{file:s,title:i,css:f}),this}}class r{state;toggle;click;constructor({toggle:n=[],initialState:s=!1}={}){this.state=b(s);let i=B(document.body),f=_.get("LOCAL_SCHEME"),o=this.isDark,h=f.as.bool,E=_.get({IS_DARK:()=>this.state.value});this.toggle=(g)=>{g?i.add(...n):i.remove(...n)};let T=this.state,H=this.toggle;if(this.click=function(){let g=T.value;T.value=g,H(g),E.save},h!=null&&h!==o)this.state.value=!h,E.save,f.set=o;if(E.as.bool)this.state.value=E.as.bool;if(this.toggle(this.state.value),this.isMatchMediaSupported)window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(g)=>{let Q=(g.matches?"dark":"light")==="dark";this.state.value=Q,f.set=Q,this.toggle(Q)})}get isMatchMediaSupported(){return window.matchMedia&&typeof window.matchMedia==="function"}get isDark(){return window.matchMedia("(prefers-color-scheme: dark)").matches}}r=d([l,c("design:paramtypes",[Object])],r);class jn{}var k={},W={};class Bn{stream;url;constructor(n,s){if(this.url=n,n in k)this.stream=k[n];else this.stream=new EventSource(n,{withCredentials:s}),k[n]=this.stream,W[this.url]={}}on(n){let s=this.stream;return t(n).forEach(([i,f])=>{if(i in W[this.url])W[this.url][i].forEach((o)=>{this.stream.removeEventListener(i,o)}),W[this.url][i]=[];if(s.addEventListener(i,f),!(i in W[this.url]))W[this.url][i]=[];W[this.url][i].push(f)}),this}}function us(n,s=!0){return new Bn(n,s)}function Yn(n){return!isNaN(parseFloat(n))&&isFinite(n)}class Gn{value;constructor(n){this.value=n}get str(){return String(this.value).toString()=="null"?null:String(this.value).toString()}get int(){if(Yn(this.value))return parseInt(this.value);else return null}get float(){if(Yn(this.value))return parseFloat(this.value);else return null}get bool(){if(this.value==="true")return!0;else if(this.value=="false")return!1;else return null}get json(){if(this.value)return JSON.parse(this.value);return null}}class v{key;func;storage;constructor(n,s="local"){if(typeof n=="object"){let[i,f]=t(n)[0];this.key=i,this.func=f}else this.key=n,this.func=null;this.storage=s=="local"?localStorage:sessionStorage}get as(){return new Gn(this.storage.getItem(this.key))}get value(){return this.storage.getItem(this.key)}get save(){if(this.func)this.set=this.func();return}set set(n){if(typeof n=="object")this.storage.setItem(this.key,JSON.stringify(n));else this.storage.setItem(this.key,String(n))}get remove(){this.storage.removeItem(this.key);return}}var _={get:(n)=>new v(n)},ms={get:(n)=>new v(n,"session")};class Nn{static set p(n){if(Z(n))console.log(...n);else console.log(n)}static get isDark(){return window.matchMedia("(prefers-color-scheme: dark)").matches}}var Dn=new RegExp(/\/\/(.*?\w.*?$)/);function Sn(n,s){let i=s;if(n){let f=Dn.exec(n);if(f?.length==2){let o=0;if(s.startsWith("..")){s.split("/").forEach((H)=>{if(H=="..")o+=1});let h=s.split("/").slice(o).join("/"),E=f[1].split("/").slice(1,-1);i=E.slice(0,E.length-o).join("/")+"/"+h}else if(s.startsWith(".")){let h=s.split("/").slice(1).join("/");i=f[1].split("/").slice(1,-1).join("/")+"/"+h}}return"./"+i}return i}function qn(n){let s=document.querySelectorAll("head link");for(let i of s)if("rel"in i){if(i.href.indexOf(n.slice(1))>-1)return!0}return!1}async function Ln(n,s){if(Array.isArray(n)){for(let f of n)await Ln(f,s);return}let i=Sn(s,n);if(qn(i))return;return new Promise((f,o)=>{let h=document.createElement("link");B(h).attr.set({id:"_css",rel:"preload stylesheet",type:"text/css",as:"style",href:i}),h.onload=()=>f(),h.onerror=()=>o(),B('script[type="module"]')?.insert("beforebegin").element(h)})}function as(n,s,i){if(qn(n))return n;let f=document.createElement("link");if(f.rel="preload",f.type=i,f.as=s,f.href=n,s==="font")f.crossOrigin="anonymous";return document.head.appendChild(f),n}var Vn=(n,s)=>{let i=s;if(n?.class)i.push(...Z(n.class)?n.class:[n.class]);return i.filter((f)=>f)};var ni=(n,s={})=>{let{exclude:i,style:f,classes:o}=s;if(o&&o.length&&(n.class=Vn(n,o)),z(n).forEach((h)=>{if(i&&i.includes(h))delete n[h]}),f&&z(f).length)!n.style&&(n.style={}),Y(n.style,f)};export{ms as session,ni as reATTR,as as preload,_ as local,Ln as loadCSS,Kn as frag,us as eventStream,A as dom,jn as UI,b as State,Jn as Router,$n as Render,P as Dom,r as ColorScheme,Nn as $$,B as $};
